<!DOCTYPE html>
<html>

    <head>
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-KPXMCL5ELR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-KPXMCL5ELR');
</script>
<title> Westside Gym </title>
        <link rel="stylesheet" href="webdesign.css" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Quicksand:wght@300..700&display=swap"
        rel="stylesheet">
        <script>
            function myFunction() {
                document.getElementById("myDropdown").classList.toggle("show");
              }
              
            
              window.onclick = function(event) {
                if (!event.target.matches('.tabclick')) {
                  var dropdowns = document.getElementsByClassName("dropdown-content");
                  var i;
                  for (i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                      openDropdown.classList.remove('show');
                    }
                  }
                }
              }
            </script>
    </head>
    <body>
      <div class="uppertab">
        <a href="profile.html" id="profileIcon" style="display: none;">
          <button class="UTbutton"><img src="login.png" width="20" height="23"></button>
        </a>
        <button class="UTbutton" id="authButton">Log In</button>

      </div>
     <div class="tab">
    <a href="index.html"> <button class="tabclick" onclick="openPage(event,'rental')">Home</button></a>
    <a href="rental.html"><button class="tabclick" onclick="openPage(event,'rental')">Rental</button></a>
    <a href="calendar.html"> <button class="selectedtab" onclick="openPage(event,'calendar')">Calendar</button> </a>
    <a href="cart.html"><img class="cartimg" id="cartIcon" src="cart.png"></a>
    <!--<a href="information.html"> <button class="tabclick" onclick="openPage(event,'information')">Information</button> </a>-->
    <button class="tabclick" onclick="myFunction()">Tickets</button>
    <a href="bookings.html" id="bookingsTab" style="display: none;">
      <button class="tabclick">Bookings</button>
    </a>
    
  
    
  </div>
    <div id="myDropdown" class="dropdown-content">
        <a href="ticketbasketball.html" ><p class="new">Basketball</p></a>
        <a href="ticketvoleyball.html"><p class="new">Voleyball</p></a>
        <a href="ticketorchestra.html"><p class="new">Orchestra</p></a>
      </div>
    <h2> Calendar</h2>
    <button class="arrows1" onclick="back()"><img src="left.png" class="arrowimage"></button>
    <button class="arrows2"onclick="next()"><img src="right.png"class="arrowimage"></button>
    <div class="calendar-month">
        <p class="ticketorchestratext2" id="monthYearLabel">February</p>
        <table class="calendar">
          <thead>
            <tr>
              <th class="days">Mon</th>
              <th class="days">Tues</th>
              <th class="days">Wed</th>
              <th class="days">Thurs</th>
              <th class="days">Fri</th>
              <th class="days">Sat</th>
              <th class="days">Sun</th>
            </tr>
          </thead>
          <tbody id="calendarBody">
            <!-- JavaScript will populate rows here -->
          </tbody>
        </table>
        <div class="extraspace"></div>
      </div>
      <script>
        const monthYearLabel = document.getElementById("monthYearLabel");
        const calendarBody = document.getElementById("calendarBody");
      
        let currentDate = new Date();
      
        // JS months are 0-indexed: May = 4, December = 11
        const eventData = [
          // May (4)
          { day: 3, month: 4, title: "Basketball Tryouts", time: "3pm-5pm", type: "eventsport" },
          { day: 10, month: 4, title: "Choir Rehearsal", time: "6pm-7:30pm", type: "eventconcert" },
      
          // June (5)
          { day: 7, month: 5, title: "Volleyball Practice", time: "5pm-6:30pm", type: "sport2" },
          { day: 15, month: 5, title: "Summer Camp Begins", time: "9am", type: "eventsport" },
      
          // July (6)
          { day: 4, month: 6, title: "Independence Day Parade", time: "10am-12pm", type: "eventconcert" },
          { day: 20, month: 6, title: "Basketball Scrimmage", time: "4pm-6pm", type: "eventsport" },
      
          // August (7)
          { day: 12, month: 7, title: "Gym Open House", time: "1pm-4pm", type: "eventconcert" },
          { day: 25, month: 7, title: "Volleyball Finals", time: "6pm", type: "sport2" },
      
          // September (8)
          { day: 5, month: 8, title: "Fall Season Kickoff", time: "10am", type: "eventsport" },
          { day: 18, month: 8, title: "Orchestra Rehearsal", time: "5pm-6:30pm", type: "eventconcert" },
      
          // October (9)
          { day: 13, month: 9, title: "Haunted Gym Night", time: "7pm-10pm", type: "eventconcert" },
          { day: 31, month: 9, title: "Halloween Event", time: "6pm-9pm", type: "eventsport" },
      
          // November (10)
          { day: 11, month: 10, title: "Veterans Day Ceremony", time: "10am", type: "eventconcert" },
          { day: 24, month: 10, title: "Thanksgiving Volleyball Match", time: "3pm", type: "sport2" },
      
          // December (11)
          { day: 5, month: 11, title: "Winter Concert", time: "7pm", type: "eventconcert" },
          { day: 20, month: 11, title: "Holiday Game Night", time: "6pm-8pm", type: "eventsport" }
        ];
      
        const monthNames = [
          "January", "February", "March", "April", "May", "June",
          "July", "August", "September", "October", "November", "December"
        ];
      
        function generateCalendar(year, month) {
          calendarBody.innerHTML = "";
          monthYearLabel.textContent = `${monthNames[month]} ${year}`;
      
          const firstDay = new Date(year, month, 1).getDay();
          const daysInMonth = new Date(year, month + 1, 0).getDate();
          const adjustedFirstDay = (firstDay + 6) % 7;
      
          let date = 1;
          for (let i = 0; i < 6; i++) {
            const row = document.createElement("tr");
            let rowHasDate = false;
      
            for (let j = 0; j < 7; j++) {
              const cell = document.createElement("td");
      
              if (i === 0 && j < adjustedFirstDay) {
                cell.innerHTML = "";
              } else if (date > daysInMonth) {
                cell.innerHTML = "";
              } else {
                rowHasDate = true;
                cell.innerHTML = `<strong>${date}</strong>`;
      
                const eventList = eventData.filter(ev => ev.day === date && ev.month === month);
      
                eventList.forEach(ev => {
                  const span = document.createElement("span");
                  span.className = `tooltip ${ev.type}`;
                  span.innerHTML = `${ev.title}<span class="tooltiptext">${ev.time}</span>`;
                  cell.appendChild(document.createElement("br"));
                  cell.appendChild(span);
                });
      
                date++;
              }
      
              row.appendChild(cell);
            }
      
            if (rowHasDate) {
              calendarBody.appendChild(row);
            } else {
              break;
            }
          }
        }
      
        function next() {
          currentDate.setMonth(currentDate.getMonth() + 1);
          generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
        }
      
        function back() {
          currentDate.setMonth(currentDate.getMonth() - 1);
          generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
        }
      
        document.addEventListener("DOMContentLoaded", () => {
          generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
        });
      </script>
      
      
      
      <script>
        let visualMonthIndex = 0;
        const months = document.querySelectorAll(".calendar-month");
      
        function showMonth(index) {
          months.forEach((month, i) => {
            month.classList.toggle("active", i === index);
          });
        }
      
        function showNextVisualMonth() {
          visualMonthIndex = (visualMonthIndex + 1) % months.length;
          showMonth(visualMonthIndex);
        }
      
        function showPreviousVisualMonth() {
          visualMonthIndex = (visualMonthIndex - 1 + months.length) % months.length;
          showMonth(visualMonthIndex);
        }
      
        document.addEventListener("DOMContentLoaded", () => {
          showMonth(visualMonthIndex);
        });
      </script>
       <script type="module">
        import { auth } from "./auth.js";
        import {
          signOut,
          onAuthStateChanged
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
      
        onAuthStateChanged(auth, (user) => {
          const authBtn = document.querySelector("#authButton");
          const profileIcon = document.querySelector("#profileIcon");
          const bookingsTab = document.querySelector("#bookingsTab");
      
          if (user) {
            authBtn.textContent = "Sign Out";
            authBtn.onclick = async () => {
              await signOut(auth);
              alert("You have been signed out.");
              location.reload();
            };
            if (user.email === "westsidegym25@gmail.com") {
  const tabBar = document.querySelector(".tab");
  const bookingsTab = tabBar.querySelector("a[href='bookings.html']");

  if (!tabBar.querySelector("#adminTab")) {
    const adminTab = document.createElement("a");
    adminTab.href = "admin.html";
    adminTab.id = "adminTab";
    adminTab.innerHTML = `<button class="tabclick">Admin Panel</button>`;

    if (bookingsTab && bookingsTab.nextSibling) {
      tabBar.insertBefore(adminTab, bookingsTab.nextSibling);
    } else {
      tabBar.appendChild(adminTab);
    }
  }
}


      
            // Show profile icon and bookings tab only if they exist
            if (profileIcon) profileIcon.style.display = "inline-block";
            if (bookingsTab) bookingsTab.style.display = "inline-block";
          } else {
            authBtn.textContent = "Log In";
            authBtn.onclick = () => {
              window.location.href = "login.html";
            };
      
            // Hide profile icon and bookings tab if visible
            if (profileIcon) profileIcon.style.display = "none";
            if (bookingsTab) bookingsTab.style.display = "none";
          }
        });
      </script>
      <script>
        function updateCartIcon() {
          const cart = JSON.parse(localStorage.getItem("cartData")) || { tickets: [] };
          let count = 0;
      
          cart.tickets.forEach(t => count += t.quantity);
      
          const img = document.getElementById("cartIcon");
          if (img) {
            if (count >= 1 && count <= 9) {
              img.src = `cart${count}.png`;
            } else {
              img.src = "cart.png";
            }
          }
        }
      
        document.addEventListener("DOMContentLoaded", updateCartIcon);
      </script>
      <script>
  const allowedPages = ['index.html', 'rental.html', 'calendar.html', 'bookings.html'];
  const currentPage = window.location.pathname.split("/").pop();

  if (allowedPages.includes(currentPage)) {
    const container = document.createElement("div");
    container.id = "chatbot-container";
    container.style.cssText = `
      position: fixed; bottom: 20px; right: 20px; z-index: 9999;
    `;
    container.innerHTML = `
      <button id="chatbot-toggle" style="background-color:#345285; color:white; border:none; border-radius:50%; width:60px; height:60px; font-size:30px; cursor:pointer;">ðŸ’¬</button>
      <iframe id="chatbot-frame" src="chatbot.html" style="display:none; width:320px; height:420px; border:none; border-radius:15px; box-shadow:0 0 10px rgba(0,0,0,0.3); transition: all 0.3s ease;"></iframe>
    `;
    document.body.appendChild(container);

    const toggle = container.querySelector("#chatbot-toggle");
    const frame = container.querySelector("#chatbot-frame");

    toggle.addEventListener("click", () => {
      frame.style.display = frame.style.display === "none" ? "block" : "none";
    });

    window.addEventListener("message", (e) => {
      if (e.data === "closeChatbot") frame.style.display = "none";
    });
  }
</script>

    
      
</body>
</html>
   
